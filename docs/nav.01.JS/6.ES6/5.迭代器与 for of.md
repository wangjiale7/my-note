# è¿­ä»£å™¨ä¸Ž for of

## è¿­ä»£å™¨

å…·æœ‰ next()æ–¹æ³•ï¼Œæ¯æ¬¡è°ƒç”¨ next è¿”å›žç»“æžœå¯¹è±¡ï¼Œ{value: å½“å‰å€¼ï¼Œdone: è¡¨ç¤ºéåŽ†æ˜¯å¦ç»“æŸ}

```js
function createIterator(items) {
  var i = 0
  return {
    next: function() {
      var done = i >= item.length
      var value = !done ? items[i++] : undefined

      return {
        done: done,
        value: value,
      }
    },
  }
}

// iterator å°±æ˜¯ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡
var iterator = createIterator([1, 2, 3])

console.log(iterator.next()) // { done: false, value: 1 }
console.log(iterator.next()) // { done: false, value: 2 }
console.log(iterator.next()) // { done: false, value: 3 }
console.log(iterator.next()) // { done: true, value: undefined }
```

## for of

ES6 è§„å®šï¼Œé»˜è®¤çš„ Iterator æŽ¥å£éƒ¨ç½²åœ¨æ•°æ®ç»“æž„çš„ `Symbol.iterator` å±žæ€§ï¼Œæˆ–è€…è¯´ï¼Œä¸€ä¸ªæ•°æ®ç»“æž„åªè¦å…·æœ‰ Symbol.iterator å±žæ€§ï¼Œå°±å¯ä»¥è®¤ä¸ºæ˜¯"å¯éåŽ†çš„"ï¼ˆiterableï¼‰ã€‚

for...of å¾ªçŽ¯å¯ä»¥ä½¿ç”¨çš„èŒƒå›´åŒ…æ‹¬ï¼š

0. `å¯¹è±¡ä¸å¯ä»¥` ï¼ï¼ðŸš«
1. æ•°ç»„
1. Set
1. Map
1. ç±»æ•°ç»„å¯¹è±¡ï¼Œå¦‚ arguments å¯¹è±¡ã€DOM NodeList å¯¹è±¡
1. Generator å¯¹è±¡
1. å­—ç¬¦ä¸²

## æ¨¡æ‹Ÿå®žçŽ° for of

```js
function forOf(obj, cb) {
  let iterable, result

  if (typeof obj[Symbol.iterator] !== 'function')
    throw new TypeError(result + ' is not iterable')
  if (typeof cb !== 'function') throw new TypeError('cb must be callable')

  iterable = obj[Symbol.iterator]()

  result = iterable.next()
  while (!result.done) {
    cb(result.value)
    result = iterable.next()
  }
}

const obj = [1, 2, 3]
forOf(obj, (value) => {
  console.log(value)
})
```
